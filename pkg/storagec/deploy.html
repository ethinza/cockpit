<head>
    <title>storageC by Ethinza Inc.</title>

    <meta charset="utf-8">

    <link href="../base1/cockpit.css" type="text/css" rel="stylesheet">
    <link href="storagec.css" type="text/css" rel="stylesheet" id="term-style">

    <script src="../base1/jquery.js"></script>
    <script src="../base1/cockpit.js"></script>
    <script src="storagec.js"></script>

</head>
<body>

<div class="container-fluid" style='max-width: 600px'>

    <table class="cockpit-form-table">
        <tr>
            <td width="100">&nbsp;</td>
            <td><a href="http://www.ethinza.com" target="_blank"><img src="logo.png" /></a></td>
            <td width="25">&nbsp;</td>
            <td>
                <b>storageC deploying HyperConvergence on node</a></b>
            </td>
        </tr>
        <tr>
            <td width="100">&nbsp;</td>
        </tr>
    </table>

    <table class="cockpit-form-table">
        <tr>
            <td width="100">&nbsp;</td>
            <td width="250"><button class="btn btn-default btn-primary" id="home" onclick="window.location.href='index.html'">Home</button></td>
        </tr>
        <tr>
            <td width="100">&nbsp;</td>
        </tr>
    </table>


    <table class="cockpit-form-table">
        <tr>
            <td width="100">&nbsp;</td>
            <td width="250"><img src="ok.png" />Check FQDN</td>
        </tr>
        <tr>
            <td width="100">&nbsp;</td>
            <td width="250"><img src="error.png" />Check oVirt</td>
        </tr>
        <tr>
            <td width="100">&nbsp;</td>
        <tr>
    </table>

    <p><pre id="output"></pre></p>

</div>

<script>
        var address = $("#address");
        var output = $("#output");
        var result = $("#result");

        $("#ping").on("click", ping_run);

        function ping_run() {
            var proc = cockpit.spawn(["ping", "-c", "4", address.val()]);

            storagec.debug("running ping for ", address.val());

            proc.done(ping_success);
            proc.stream(ping_output);
            proc.fail(ping_fail);

            result.empty();
            output.empty();
        }

        function ping_success() {
            result.css("color", "green");
            result.text("success");
        }

        function ping_fail() {
            result.css("color", "red");
            result.text("fail");
        }

        function ping_output(data) {
            output.append(document.createTextNode(data));
        }
    </script>
</body>
</html>
